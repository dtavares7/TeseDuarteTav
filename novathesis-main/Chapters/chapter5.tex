%!TEX root = ../template.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% chapter5.tex
%% NOVA thesis document file
%%
%% Chapter with a short latex tutorial and examples
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\typeout{NT FILE chapter5.tex}%

\chapter{Conclusion}
\label{cha:conclusion}

\section{Summary of the Work}
\label{sec:summary}

This dissertation addressed a critical challenge in the model-driven development of distributed control systems: the lack of automated support for generating inter-controller communication infrastructure within the \gls{iopt}-Tools framework. Manual implementation of these communication links was identified as a time-consuming and error-prone process that hinders the rapid prototyping of distributed systems specified with \gls{iopt} Petri nets.

To bridge this gap, a server-side software tool was designed and implemented as a web-based Application Programming Interface (\gls{api}). As detailed in Chapter 3, the tool is capable of dynamically generating C++ communication modules for three distinct protocols \gls{i2c}, \gls{uart}, and \gls{tcp}/\gls{mqtt}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      based on a simple set of URL parameters, thereby automating a previously manual task.

The practical utility and performance of this tool were subsequently validated through the comprehensive case study of a three-conveyor automation system, presented in Chapter \ref{cha:case_study}. This study demonstrated the tool's successful integration into an end-to-end development workflow, from a high-level \gls{iopt} Petri net model to a functional, multi-controller hardware implementation. Furthermore, the case study provided a quantitative analysis of the  \textbf{memory footprint and communication latency} associated with each protocol, offering empirical data on the trade-offs between them.


\section{Main Contributions}
\label{sec:main_contributions}

The research and development detailed in this dissertation have resulted in several key contributions to the field of model-driven development for distributed embedded systems. 

The first and most significant contribution is the design and implementation of a functional web-based \gls{api} that automates the generation of communication code for distributed controllers specified with \gls{iopt} Petri nets. The tool supports three widely used protocols (\gls{i2c}, \gls{uart}, and \gls{tcp}/\gls{mqtt}) and directly addresses a critical gap in the \gls{iopt}-Tools framework, replacing a manual, error-prone task with a rapid and reliable automated process.

Another contribution is the validation of an end-to-end model-driven workflow. This dissertation demonstrates how a high-level system model can be decomposed and subsequently implemented on a physical, multi-controller testbed by integrating the code generated by \gls{iopt}-Tools with the communication modules produced by the new \gls{api}. The successful implementation of the heterogeneous conveyor system case study provides concrete evidence of the feasibility and effectiveness of this workflow.

In addition, this work presents a novel empirical analysis of the communication modules generated, providing quantitative performance data to support protocol selection. By measuring key performance metrics, including the \textbf{memory footprint and communication latency}  of each protocol within a real-world application, this study highlights the critical trade-offs between hardware-level and network-level communication approaches. These results serve as a valuable resource for system designers, enabling more informed data-driven decisions when selecting communication technologies for resource-constrained embedded systems.

Additionally, the public release of the source code of the developed software tool promotes transparency and enables the reproducibility of the results presented in this dissertation. The implementation is available in a public Git repository\footnote{The complete open-source implementation of the API is available at: \url{https://github.com/dtavares7/Api}}.

Together, these contributions advance the state-of-the-art in model-driven engineering for distributed embedded systems. They not only extend the functionality of the \gls{iopt}-Tools framework but also establish a \lugoDEL{complete}\lugoADD{comprehensive}  and validated workflow, supported by empirical evidence, that can guide both researchers and practitioners in the design of reliable and efficient distributed control solutions.


\section{Limitations}
\label{sec:limitations}

Although the developed tool and the proposed workflow successfully meet the primary objectives of this dissertation, it is important to acknowledge several limitations of the current implementation. These limitations provide clear opportunities for future research and development. 

The first limitation concerns the handling of multiple events. Currently, the \gls{api} generates a complete and self-contained block of code for each individual event request. When multiple events are generated using the same communication protocol, the resulting output contains duplicated setup code and helper functions. This requires users to manually merge and de-duplicate the code, which is counter to the overall goal of full automation.

The second limitation relates to the scope of the protocol support. The tool was developed as a proof-of-concept and currently supports only three protocols: \gls{i2c}, \gls{uart}, and \gls{tcp}/\gls{mqtt}. Although these protocols cover a range of typical use cases, from local buses to network communication, other widely adopted industrial and embedded protocols, such as the Serial Peripheral Interface (\gls{spi}) and the Controller Area Network (CAN) bus, are not yet implemented.

A further limitation arises from the stateless design of the \gls{api}. Each request is processed independently, which is effective in generating individual communication modules but prevents the implementation of a more complex project-based workflow. In its current form, the tool lacks the ability to manage a collection of events for a single distributed system and to generate a consolidated and optimized output for all controllers involved.

Taken together, these limitations underscore the fact that while the current implementation demonstrates the feasibility and utility of automated communication code generation, it remains an early-stage solution. They highlight concrete directions for future work, particularly in extending protocol coverage, improving support for multievent systems, and evolving toward a more integrated and project-oriented workflow.



\section{Future Work}
\label{sec:future_work}

The work presented in this dissertation establishes a solid foundation for the automated generation of communication modules. The limitations identified in the previous section provide a clear roadmap for future research and development that could further enhance the tool's capabilities and impact. 

A first direction for future work is the development of a project-based generator. This would represent a significant evolution beyond the current stateless, per-event approach, enabling users to define an entire distributed system, including all its controllers and communication events. Such a generator would automatically manage dependencies, intelligently resolve code duplication, and produce a consolidated and optimized set of source files for the complete project. This would achieve complete automation and completely eliminate the need for manual code merging.

A second avenue concerns the expansion of protocol support. To increase the versatility and applicability of the tool in industrial and embedded domains, additional protocols must be implemented. Of particular relevance are the Serial Peripheral Interface (\gls{spi}), which enables high-speed local communication, and the Controller Area Network (CAN) bus, which is widely adopted in automotive and industrial automation systems. Inclusion of these protocols would significantly broaden the scope of the tool.

The third direction involves the creation of a more advanced user interface and integration mechanisms. On the one hand, a web-based Graphical User Interface (\gls{gui}) could be developed on top of the existing \gls{api}, allowing users to configure communication links through intuitive forms and diagrams rather than manually constructing URLs. However, the current GET-based interface could be extended to a fully RESTful \gls{api} with JSON-based data exchange. This would enable more robust programmatic integration with external development environments, including the \gls{iopt}-Tools platform itself, thereby enhancing usability and interoperability.

Together, these developments would strengthen the practical utility of the proposed tool, bringing it closer to a production-ready solution that supports a wide range of use cases and seamlessly integrates into existing model-driven workflows.

% ===================================================================
% Section 5.5: Final Remarks
% ===================================================================
\section{Final Remarks}
\label{sec:final_remarks}

The model-driven development paradigm offers a powerful approach to managing the complexity of modern embedded systems. By raising the level of abstraction, designers can focus on the core logic of a system while relying on automated tools for verification and implementation. This dissertation contributes to this paradigm by addressing a critical gap in the development of distributed systems with \gls{iopt} Petri nets. The automated tool presented here reduces development time, minimizes implementation errors, and empowers designers with empirical data to make better engineering decisions.This work serves as a valuable step toward more efficient and reliable methods for creating the next generation of distributed control systems.

